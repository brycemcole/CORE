       <link rel="stylesheet" href="/css/right-side-container.css" />


       <div class="right-side-container">
         <div class="job-header">
           <h5>Openings</h5>
         </div>
         <div class="jobslist">

         </div>
       </div>
       <script>
         function fetchJobPreviews() {
           let currentPage = 1;
           const itemsPerPage = 10;
           fetch(`/api/jobs?page=${currentPage}&limit=${itemsPerPage}`)
             .then(response => response.json())
             .then(data => {
               const jobs = data.jobPostings;
               const isMobile = window.matchMedia('(max-width: 768px)').matches;
               let jobslistContainer;
               if (isMobile) {
                 jobslistContainer = document.querySelector('#posts-container > div.mobile-jobs-container > div.jobslist');
               } else {
                 jobslistContainer = document.querySelector('.right-side-container > div.jobslist');
               }
               jobslistContainer.innerHTML = jobs.map(job => `
              <div class="job" onclick="window.location.href='/jobs/${job.id}'">
                <div class="job-content">
                  <div class="job-content-header">
                    <div class="company-logo-container">
                      <img loading="lazy" src="${job.company_logo}" alt="Company Logo" class="job-company-logo" />
                    </div>
                    <div class="job-title-location">
                      <div class="job-posting-header">
                        <div class="job-company-name">${job.company_name}</div>
                      </div>
                    </div>
                    <div class="job-flairs">
                      <span class="job-flair" id="pay-flair">$${Math.floor((job.salary) /  1000)}k+</span>
                  </div>
                  </div>
                  <div class="job-title">${job.title.slice(0, 40)}</div>

                  ${!isMobile ? `
                    <div class="job-description">
                      <p>${job.description}</p>
                    </div>
              <div class="desktop-job-flairs">
                  ${job.tags
                      .filter(tag => tag)
                      .flatMap(tag => tag.split(','))
                      .slice(0, 3)
                      .map(tag => `<span class="job-flair">${tag.trim()}</span>`)
                      .join('')}
              </div>
                  ` : `
                    <div class="job-description">
                      <p>${job.description}</p>
                    </div>
                  `}
                </div>
              </div>
            `).join('');
               jobslistContainer.innerHTML += '<div class="see-more"><a href="/jobs">See More</a></div>';


               const jobElements = jobslistContainer.querySelectorAll('.job');
             })
             .catch(error => {
               console.error('Error fetching job previews:', error);
             });
         }


         function fetchCommunityJobPreviews(communityId) {
           let currentPage = 1;
           const itemsPerPage = 10;
           fetch(`/api/community/${communityId}/jobs?page=${currentPage}&limit=${itemsPerPage}`)
             .then(response => response.json())
             .then(data => {
               const jobs = data.jobPostings;
               const isMobile = window.matchMedia('(max-width: 768px)').matches;
               let jobslistContainer;
               if (isMobile) {
                 jobslistContainer = document.querySelector('#posts-container > div.mobile-jobs-container > div.jobslist');
               } else {
                 jobslistContainer = document.querySelector('.right-side-container > div.jobslist');
               }
               jobslistContainer.innerHTML = jobs.map(job => `
              <div class="job" onclick="window.location.href='/jobs/${job.id}'">
                <div class="job-content">
                  <div class="job-content-header">
                    <div class="company-logo-container">
                      <img loading="lazy" src="${job.company_logo}" alt="Company Logo" class="job-company-logo" />
                    </div>
                    <div class="job-title-location">
                      <div class="job-posting-header">
                        <div class="job-company-name">${job.company_name}</div>
                      </div>
                    </div>
                    <div class="job-flairs">
                      <span class="job-flair" id="pay-flair">$${Math.floor((job.salary) /  1000)}k+</span>
                  </div>
                  </div>
                  <div class="job-title">${job.title.slice(0, 40)}</div>

                  ${!isMobile ? `
                    <div class="job-description">
                      <p>${job.description}</p>
                    </div>
              <div class="desktop-job-flairs">
                  ${job.tags
                      .filter(tag => tag)
                      .flatMap(tag => tag.split(','))
                      .slice(0, 3)
                      .map(tag => `<span class="job-flair">${tag.trim()}</span>`)
                      .join('')}
              </div>
                  ` : `
                    <div class="job-description">
                      <p>${job.description}</p>
                    </div>
                  `}
                </div>
              </div>
            `).join('');
               jobslistContainer.innerHTML += '<div class="see-more"><a href="/jobs">See More</a></div>';


               const jobElements = jobslistContainer.querySelectorAll('.job');
               jobElements.forEach(jobElement => {
                 const locationFlair = jobElement.querySelector('#location-flair');
                 const location = locationFlair.dataset.location;
               });
             })
             .catch(error => {
               console.error('Error fetching job previews:', error);
             });
         }

         document.addEventListener("DOMContentLoaded", () => {
           const postsContainer = document.getElementById('posts-container');
           if (!postsContainer) {
             fetchJobPreviews();
             return;
           }
           const communityId = postsContainer.dataset.communityId || post.community.id;
           if (!communityId) {
             fetchJobPreviews();
           } else {
             console.log(communityId);
             fetchCommunityJobPreviews(communityId);
           }
         });
       </script>